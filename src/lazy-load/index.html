<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta http-equiv="X-UA-Compatible" content="ie=edge">
 <title>Document</title>

 <style>
     *{
         margin: 0;
         padding: 0;
     }

     .img{
         width: 200px;
         height: 200px;
         background-color: grey;
     }

     .pic{

     }

     
   

 </style>

 
</head>
<body>
<div class="container">
    <div class="img">
        <img data-src="./images/1.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/2.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/3.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/4.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/5.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/6.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/7.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/8.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/9.webp" alt="加载中" class="pic">
    </div>
    <div class="img">
        <img data-src="./images/10.webp" alt="加载中" class="pic">
    </div>
    
</div>

<script>
    function lazyload() {
        const imgs = document.getElementsByTagName('img')
        let num = 0
        // 可视窗口的高度，在当代浏览器中使用window.innerHeight获取，在低版本的ie浏览器中使用document.documentElement.clientHeight获取
        const viewHeight = window.innerHeight || document.documentElement.clientHeight

        for (let i = num; i < imgs.length; i++) {
            const top = imgs[i].getBoundingClientRect().top
            if (viewHeight - top > 0) {
                imgs[i].src = imgs[i].getAttribute('data-src')
                num = i + 1
            }
        }
    }

    // lazyload()
    // window.addEventListener('scroll', lazyload, false)


function debounce(fn, delay) {
    let timer = null 
    return function(...args){
        const context = this
        if (timer) { 
            // 再次触发时，如果定时器时间没到，就取消定时器的执行
            clearTimeout(timer)
        }
        timer = setTimeout(function() {
            console.log('-------d-----')
            fn.call(context, ...args)
        }, delay)
    }
}

function throttle(fn, interval) {
    let last = 0
    
    return function(...args) {
        let now = +new Date() // 转换为时间戳
        if (now - last > interval) {
            console.log('-------d-----')
            fn.call(this, ...args)
            last = now
        }
    }
}


    const throttleLazyload = throttle(lazyload, 2000)
    window.addEventListener('scroll', throttleLazyload, false)
    
   
</script>
   
</body>
</html>
